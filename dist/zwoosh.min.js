!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.zwoosh=t()}}(function(){var t;return function t(e,i,o){function n(r,l){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!l&&h)return h(r,!0);if(s)return s(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return n(i?i:t)},c,c.exports,t,e,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(e,i,o){!function(n){if("object"==typeof i&&"object"==typeof i.exports){var s=n(e,o);void 0!==s&&(i.exports=s)}else"function"==typeof t&&t.amd&&t(["require","exports"],n)}(function(t,e){"use strict";function i(t,e){void 0===e&&(e={}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,o=function(){},n=function(){return i.apply(this instanceof o?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(o.prototype=this.prototype),n.prototype=new o,n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),n=o.length>>>0;if(0===n)return-1;var s=+e||0;if(Math.abs(s)===1/0&&(s=0),s>=n)return-1;for(i=Math.max(s>=0?s:n-Math.abs(s),0);i<n;){if(i in o&&o[i]===t)return i;i++}return-1});var i={onload:1,onunload:1,onblur:1,onchange:1,onfocus:1,onreset:1,onselect:1,onsubmit:1,onabort:1,onkeydown:1,onkeypress:1,onkeyup:1,onclick:1,ondblclick:1,onmousedown:1,onmousemove:1,onmouseout:1,onmouseover:1,onmouseup:1},o={onscroll:window},n=function(){function t(t,e){this.container=t,this.options=e,this.classInner="zw-inner",this.classOuter="zw-outer",this.classGrab="zw-grab",this.classNoGrab="zw-nograb",this.classGrabbing="zw-grabbing",this.classUnique="zw-"+Math.random().toString(36).substring(7),this.classScale="zw-scale",this.classIgnore="zw-ignore",this.classFakeBody="zw-fakebody",this.customEvents=[],this.triggered={collideLeft:!1,collideTop:!1,collideRight:!1,collideBottom:!1},this.timeouts=[],this.vx=[],this.vy=[],this.container=t;var i={gridX:1,gridY:1,gridShow:!1,elasticEdges:{left:!1,right:!1,top:!1,bottom:!1},dragScroll:!0,dragOptions:{exclude:["input","textarea","a","button","."+this.classIgnore,"select"],only:[],fade:!0,brakeSpeed:2500,fps:30,maxSpeed:3e3,minSpeed:300},wheelScroll:!0,wheelOptions:{direction:"vertical",step:114,smooth:!0},wheelZoom:!1,zoomOptions:{maxScale:0,minScale:0,step:.1,direction:"up"},handleAnchors:!0};this.options=this.mergeOptions(e,i),this.init()}return t.prototype.mergeOptions=function(t,e){for(var i in t)if(t.hasOwnProperty(i))if("object"==typeof t[i])for(var o in t[i])t[i].hasOwnProperty(o)&&(e[i][o]=t[i][o]);else e[i]=t[i];return e},t.prototype.init=function(){var t=this;this.initBody(),this.addClass(this.container,this.classOuter),this.scrollElement=this.container;var e=this.getScrollLeft(),i=this.getScrollTop();for(this.inner=document.createElement("div"),this.addClass(this.inner,this.classInner),this.addClass(this.inner,this.classUnique),this.scaleElement=document.createElement("div"),this.addClass(this.scaleElement,this.classScale),this.scaleElement.appendChild(this.inner);this.container.childNodes.length>0;)this.inner.appendChild(this.container.childNodes[0]);this.container.appendChild(this.scaleElement);var o=this.getBorder(this.container);this.inner.style.minWidth=this.container.scrollWidth-o[0]+"px",this.inner.style.minHeight=this.container.scrollHeight-o[1]+"px",this.scaleElement.style.minWidth=this.inner.style.minWidth,this.scaleElement.style.minHeight=this.inner.style.minHeight,this.scaleElement.style.overflow="hidden",this.initGrid(),this.oldClientWidth=document.documentElement.clientWidth,this.oldClientHeight=document.documentElement.clientHeight,this.onScroll(),this.scrollTo(e,i,!1),this.initWheelScroll(),this.initWheelZoom(),this.scrollHandler=function(e){return t.onScroll(e)},this.addEventListener(this.container,"scroll",this.scrollHandler),this.isBody&&(this.resizeHandler=function(e){return t.onResize(e)},window.onresize=this.resizeHandler),this.initDragScroll(),this.initAnchors()},t.prototype.reinit=function(){return this.destroy(),this.classUnique="zw-"+Math.random().toString(36).substring(7),this.init(),this},t.prototype.initBody=function(){if(this.isBody="BODY"===this.container.tagName,this.isBody===!0){var t=document.createElement("div");for(this.addClass(t,this.classFakeBody),t.style.cssText=document.body.style.cssText;this.container.childNodes.length>0;)t.appendChild(this.container.childNodes[0]);this.container.appendChild(t),this.container=t}},t.prototype.initGrid=function(){if((1!==this.options.gridX||1!==this.options.gridY)&&this.options.gridShow){var t=[];1!==this.options.gridX?t.push("linear-gradient(to right, grey 1px, transparent 1px)"):null,1!==this.options.gridY?t.push("linear-gradient(to bottom, grey 1px, transparent 1px)"):null,this.addBeforeCSS(this.classUnique,"width",this.inner.style.minWidth),this.addBeforeCSS(this.classUnique,"height",this.inner.style.minHeight),this.addBeforeCSS(this.classUnique,"left","-"+this.getStyle(this.container,"paddingLeft")),this.addBeforeCSS(this.classUnique,"top","-"+this.getStyle(this.container,"paddingTop")),this.addBeforeCSS(this.classUnique,"background-size",(1!==this.options.gridX?this.options.gridX+"px ":"auto ")+(1!==this.options.gridY?this.options.gridY+"px":"auto")),this.addBeforeCSS(this.classUnique,"background-image",t.join(", "))}},t.prototype.initWheelScroll=function(){var t=this;this.options.wheelScroll===!1?(this.mouseScrollHandler=function(e){return t.disableMouseScroll(e)},this.scrollElement.onmousewheel=this.mouseScrollHandler,this.addEventListener(this.scrollElement,"wheel",this.mouseScrollHandler)):this.options.wheelScroll===!0&&(this.mouseScrollHandler=function(e){return t.activeMouseScroll(e)},this.scrollElement.onmousewheel=this.mouseScrollHandler,this.addEventListener(this.scrollElement,"wheel",this.mouseScrollHandler))},t.prototype.initWheelZoom=function(){var t=this;this.options.gridShow?this.scaleTo(1):null,this.options.wheelZoom===!0&&(this.mouseZoomHandler=function(e){return t.activeMouseZoom(e)},this.addEventListener(this.scrollElement,"wheel",this.mouseZoomHandler))},t.prototype.initDragScroll=function(){var t=this;this.options.dragScroll===!0?(this.addClass(this.inner,this.classGrab),this.mouseDownHandler=function(e){return t.mouseDown(e)},this.addEventListener(this.inner,"mousedown",this.mouseDownHandler)):this.addClass(this.container,this.classNoGrab)},t.prototype.initAnchors=function(){var t=this;if(this.options.handleAnchors===!0){var e=this.container.querySelectorAll("a[href^='#']");this.hashChangeClickHandler=function(e){var i=e?e.target:window.event.srcElement;"undefined"!=typeof i&&(history.pushState({},"",i.href),e.preventDefault?e.preventDefault():e.returnValue=!1),t.triggerEvent(window,"myhashchange")};for(var i=0;i<e.length;i++)this.addEventListener(e[i],"click",this.hashChangeClickHandler,!1);this.hashChangeHandler=function(e){return t.onHashChange(e)},this.addEventListener(window,"myhashchange",this.hashChangeHandler),this.addEventListener(window,"hashchange",this.hashChangeHandler),this.onHashChange()}},t.prototype.getScrollLeft=function(){return this.scrollElement.scrollLeft},t.prototype.setScrollLeft=function(t){this.scrollElement.scrollLeft=t},t.prototype.getScrollTop=function(){return this.scrollElement.scrollTop},t.prototype.setScrollTop=function(t){this.scrollElement.scrollTop=t},t.prototype.onHashChange=function(t){void 0===t&&(t=null);var e=window.location.hash.substr(1);if(""!==e)for(var i=this.container.querySelectorAll("#"+e),o=0;o<i.length;o++){for(var n=i[o],s=i[o],r=n;s&&s.parentElement&&this.container!==s;)this.hasClass(s,this.classOuter)&&(r=s),s=s.parentElement;return null!==t&&"hashchange"===t.type&&this.scrollTo(this.originScrollLeft,this.originScrollTop,!1),void this.scrollToElement(r)}},t.prototype.scrollToElement=function(t){var e=(t.offsetLeft-this.container.offsetLeft)*this.getScale(),i=(t.offsetTop-this.container.offsetTop)*this.getScale();this.scrollTo(e,i)},t.prototype.addBeforeCSS=function(t,e,i){"function"==typeof document.styleSheets[0].insertRule?document.styleSheets[0].insertRule("."+t+"::before { "+e+": "+i+"}",0):"function"==typeof document.styleSheets[0].addRule&&document.styleSheets[0].addRule("."+t+"::before",e+": "+i)},t.prototype.getBorder=function(t){function e(t){return"thin"===t?1:"medium"===t?3:"thick"===t?5:isNaN(parseInt(t,10))?0:parseInt(t,10)}function i(t){return"auto"===t?0:isNaN(parseInt(t,10))?0:parseInt(t,10)}var o=e(this.getStyle(t,"borderLeftWidth")),n=e(this.getStyle(t,"borderRightWidth")),s=i(this.getStyle(t,"paddingLeft")),r=i(this.getStyle(t,"paddingRight")),l=i(this.getStyle(t,"marginLeft")),h=i(this.getStyle(t,"marginRight")),a=e(this.getStyle(t,"borderTopWidth")),c=e(this.getStyle(t,"borderBottomWidth")),d=i(this.getStyle(t,"paddingTop")),p=i(this.getStyle(t,"paddingBottom")),u=i(this.getStyle(t,"marginTop")),f=i(this.getStyle(t,"marginBottom"));return[s+r+o+n+l+h,d+p+a+c+u+f]},t.prototype.disableMouseScroll=function(t){this.elementBehindCursorIsMe(t.clientX,t.clientY)&&(this.clearTimeouts(),t||(t=window.event),t.preventDefault?t.preventDefault():t.returnValue=!1)},t.prototype.hasScrollbar=function(t,e){var i=!1,o="overflow";return"vertical"===e?(o="overflowY",i=t.scrollHeight>t.clientHeight):"horizontal"===e&&(o="overflowX",i=t.scrollWidth>t.clientWidth),i="visible"===this.getStyle(this.container,"overflow")||"visible"===this.getStyle(this.container,"overflowY")||i&&"auto"===this.getStyle(this.container,"overflow")||i&&"auto"===this.getStyle(this.container,"overflowY")},t.prototype.activeMouseScroll=function(t){if(t||(t=window.event),this.elementBehindCursorIsMe(t.clientX,t.clientY)){var e;if("deltaY"in t)e=t.deltaY>0?"down":"up";else{if(!("wheelDelta"in t))return;e=t.wheelDelta>0?"up":"down"}if("vertical"===this.options.wheelOptions.direction&&this.hasScrollbar(this.scrollElement,this.options.wheelOptions.direction)&&!(this.triggered.collideBottom&&"down"===e||this.triggered.collideTop&&"up"===e))return void this.clearTimeouts();this.disableMouseScroll(t);var i=this.getScrollLeft(),o=this.getScrollTop();"horizontal"===this.options.wheelOptions.direction?i=this.getScrollLeft()+("down"===e?this.options.wheelOptions.step:this.options.wheelOptions.step*-1):"vertical"===this.options.wheelOptions.direction&&(o=this.getScrollTop()+("down"===e?this.options.wheelOptions.step:this.options.wheelOptions.step*-1)),this.scrollTo(i,o,!1)}},t.prototype.activeMouseZoom=function(t){if(t||(t=window.event),this.elementBehindCursorIsMe(t.clientX,t.clientY)){var e;if("deltaY"in t)e=t.deltaY>0?"down":"up";else{if(!("wheelDelta"in t))return;e=t.wheelDelta>0?"up":"down"}var i;i=e===this.options.zoomOptions.direction?this.getScale()*(1+this.options.zoomOptions.step):this.getScale()/(1+this.options.zoomOptions.step),this.scaleTo(i)}},t.prototype.scrollbarWidth=function(t){return t.offsetWidth-t.clientWidth-parseInt(this.getStyle(t,"borderLeftWidth"))-parseInt(this.getStyle(t,"borderRightWidth"))},t.prototype.scrollbarHeight=function(t){return t.offsetHeight-t.clientHeight-parseInt(this.getStyle(t,"borderTopWidth"))-parseInt(this.getStyle(t,"borderBottomWidth"))},t.prototype.getScale=function(){if("undefined"!=typeof this.inner.style.transform){var t=this.inner.style.transform.match(/scale\(([0-9,\.]+)\)/)||[""];return parseFloat(t[1])||1}return 1},t.prototype.scaleBy=function(t,e){void 0===e&&(e=!0);var i=this.getScale()*(t/100);this.scaleTo(i,e)},t.prototype.scaleTo=function(t,e){void 0===e&&(e=!0);var i=parseFloat(this.inner.style.minWidth)*t,o=parseFloat(this.inner.style.minHeight)*t,n=this.container.clientWidth+this.scrollbarWidth(this.container),s=this.container.clientHeight+this.scrollbarHeight(this.container);if(e)for(;t>this.options.zoomOptions.maxScale&&0!==this.options.zoomOptions.maxScale||t<this.options.zoomOptions.minScale&&0!==this.options.zoomOptions.minScale||i<this.container.clientWidth&&!this.isBody||o<this.container.clientHeight&&!this.isBody;)t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),0!==this.options.zoomOptions.maxScale&&(i=Math.floor(parseInt(this.inner.style.minWidth)*t),o=Math.floor(parseInt(this.inner.style.minHeight)*t)),i<n&&!this.isBody&&(t=t/i*n,o=Math.floor(parseInt(this.inner.style.minHeight)*t),i=n),o<s&&!this.isBody&&(t=t/o*s,i=Math.floor(parseInt(this.inner.style.minWidth)*t),o=s);this.inner.style.transform="translate(0px, 0px) scale("+t+")",this.scaleElement.style.minWidth=this.scaleElement.style.width=i+"px",this.scaleElement.style.minHeight=this.scaleElement.style.height=o+"px"},t.prototype.elementBehindCursorIsMe=function(t,e){var i=document.elementFromPoint(t,e);if(this.hasClass(i,this.classOuter))return!1;for(;i&&!this.hasClass(i,this.classInner);)i=i.parentElement;return this.inner===i},t.prototype.getTimestamp=function(){if("object"==typeof window.performance){if("now"in window.performance)return window.performance.now();if("webkitNow"in window.performance)return window.performance.webkitNow()}return(new Date).getTime()},t.prototype.onScroll=function(t){var e=this.getScrollLeft(),i=this.getScrollTop();this.scrollMaxLeft=this.scrollElement.scrollWidth-this.scrollElement.clientWidth,this.scrollMaxTop=this.scrollElement.scrollHeight-this.scrollElement.clientHeight,0===e?(this.triggered.collideLeft?null:this.triggerEvent(this.inner,"collide.left"),this.triggered.collideLeft=!0):this.triggered.collideLeft=!1,0===i?(this.triggered.collideTop?null:this.triggerEvent(this.inner,"collide.top"),this.triggered.collideTop=!0):this.triggered.collideTop=!1,e===this.scrollMaxLeft?(this.triggered.collideRight?null:this.triggerEvent(this.inner,"collide.right"),this.triggered.collideRight=!0):this.triggered.collideRight=!1,i===this.scrollMaxTop?(this.triggered.collideBottom?null:this.triggerEvent(this.inner,"collide.bottom"),this.triggered.collideBottom=!0):this.triggered.collideBottom=!1},t.prototype.onResize=function(t){var e=this,i=function(){e.inner.style.minWidth=null,e.inner.style.minHeight=null;var t=parseInt(e.getStyle(document.body,"marginLeft"),10)+parseInt(e.getStyle(document.body,"marginRight"),10),i=parseInt(e.getStyle(document.body,"marginTop"),10)+parseInt(e.getStyle(document.body,"marginBottom"),10);e.inner.style.minWidth=document.documentElement.scrollWidth-t+"px",e.inner.style.minHeight=document.documentElement.scrollHeight-i-100+"px"};this.oldClientWidth===document.documentElement.clientWidth&&this.oldClientHeight===document.documentElement.clientHeight||(window.clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(i,10)),this.oldClientWidth=document.documentElement.clientWidth,this.oldClientHeight=document.documentElement.clientHeight},t.prototype.clearTextSelection=function(){window.getSelection&&window.getSelection().removeAllRanges(),document.selection&&document.selection.empty()},t.prototype.addEventListener=function(t,e,n,s){void 0===s&&(s=!0);var r=s?n.bind(this):n;if("function"==typeof t.addEventListener)o["on"+e]&&"BODY"===t.tagName&&(t=o["on"+e]),t.addEventListener(e,r);else if("object"==typeof t.attachEvent&&i["on"+e])t.attachEvent("on"+e,r);else if("object"==typeof t.attachEvent&&o["on"+e])if("BODY"===t.tagName){var l="on"+e;o[l][l]=r}else t.onscroll=r;else"object"==typeof t.attachEvent?(t[e]=1,r=function(t){t.propertyName===e&&n(t)},t.attachEvent("onpropertychange",r)):t["on"+e]=r;this.customEvents[e]?null:this.customEvents[e]=[],this.customEvents[e].push([n,r])},t.prototype.removeEventListener=function(t,e,o){if(e in this.customEvents)for(var n in this.customEvents[e])if(this.customEvents[e][n][0]===o){o=this.customEvents[e][n][1],this.customEvents[e].splice(n,1);break}"function"==typeof t.removeEventListener?t.removeEventListener(e,o):"object"==typeof t.detachEvent&&i["on"+e]?t.detachEvent("on"+e,o):"object"==typeof t.detachEvent?t.detachEvent("onpropertychange",o):t["on"+e]=null},t.prototype.triggerEvent=function(t,e){var o;"function"==typeof window.CustomEvent?o=new CustomEvent(e):"function"==typeof document.createEvent?(o=document.createEvent("HTMLEvents"),o.initEvent(e,!0,!0)):document.createEventObject&&(o=document.createEventObject(),o.eventType=e),o.eventName=e,t.dispatchEvent?t.dispatchEvent(o):t[e]?t[e]++:t.fireEvent&&i["on"+e]?t.fireEvent("on"+o.eventType,o):t[e]?t[e]():t["on"+e]&&t["on"+e]()},t.prototype.addClass=function(t,e){this.hasClass(t,e)||(t.className+=" "+e+" ")},t.prototype.removeClass=function(t,e){var i=new RegExp(" "+e+" ","g");t.className=t.className.replace(i,"")},t.prototype.hasClass=function(t,e){var i=new RegExp(" "+e+" ");return null!==t.className.match(i)},t.prototype.getStyle=function(t,e){var i=e.replace(/([A-Z])/g,"-$1").toLowerCase();return"function"==typeof window.getComputedStyle?window.getComputedStyle(t).getPropertyValue(i):t.currentStyle[e]},t.prototype.clearTimeouts=function(){if(this.timeouts){for(var t in this.timeouts)clearTimeout(this.timeouts[t]);this.timeouts.length>0&&(this.timeouts=[],this.removeEventListener(this.inner,"collide.left",this.clearListenerLeft),this.removeEventListener(this.inner,"collide.right",this.clearListenerRight),this.removeEventListener(this.inner,"collide.top",this.clearListenerTop),this.removeEventListener(this.inner,"collide.bottom",this.clearListenerBottom))}},t.prototype.mouseDown=function(t){var e=this;if(this.clearTimeouts(),("which"in t&&1===t.which||"undefined"==typeof t.which&&"button"in t&&1===t.button)&&this.elementBehindCursorIsMe(t.clientX,t.clientY)){for(var i=this.container.querySelectorAll("img"),o=0;o<i.length;o++)i[o].ondragstart=function(){return!1};if(0!==this.options.dragOptions.exclude.length)for(var n=document.elementFromPoint(t.clientX,t.clientY),s=this.container.querySelectorAll(this.options.dragOptions.exclude.join(", "));n&&!this.hasClass(n,this.classInner);){for(var o=0;o<s.length;o++)if(s[o]===n)return;n=n.parentElement}this.addClass(document.body,this.classGrabbing),this.dragging=!0,this.dragOriginLeft=t.clientX,this.dragOriginTop=t.clientY,this.dragOriginScrollLeft=this.getScrollLeft(),this.dragOriginScrollTop=this.getScrollTop(),this.parentOriginStyle=this.inner.parentElement.style.cssText,"function"==typeof this.inner.parentElement.style.setProperty&&this.inner.parentElement.style.setProperty("scroll-behavior","auto"),t.preventDefault?t.preventDefault():t.returnValue=!1,this.vx=[],this.vy=[],this.mouseMoveHandler=this.mouseMove.bind(this),this.addEventListener(document.documentElement,"mousemove",this.mouseMoveHandler),this.mouseUpHandler=function(t){return e.mouseUp(t)},this.addEventListener(document.documentElement,"mouseup",this.mouseUpHandler)}},t.prototype.mouseUp=function(t){this.inner.style.position="",this.inner.style.top=null,this.inner.style.left=null,this.present=this.getTimestamp()/1e3;var e=this.dragOriginLeft+this.dragOriginScrollLeft-t.clientX,i=this.dragOriginTop+this.dragOriginScrollTop-t.clientY;if(c=this.getRealCoords(e,i),e=c[0],i=c[1],this.removeClass(document.body,this.classGrabbing),this.inner.parentElement.style.cssText=this.parentOriginStyle,this.dragging=!1,this.removeEventListener(document.documentElement,"mousemove",this.mouseMoveHandler),this.removeEventListener(document.documentElement,"mouseup",this.mouseUpHandler),i!==this.getScrollTop()||e!==this.getScrollLeft()){var o=this.present-(this.past?this.past:this.present);o>.05&&this.scrollTo(e,i,this.options.dragOptions.fade)}if(this.options.dragOptions.fade&&"undefined"!=typeof this.vx&&"undefined"!=typeof this.vy){var n,s;d=this.calcAverageVelocity(.1),n=d[0],s=d[1];var r=this.options.dragOptions.maxSpeed,l=this.options.dragOptions.minSpeed;if(s<l&&s>-l&&n<l&&n>-l)return void((this.options.gridY>1||this.options.gridX>1)&&this.scrollTo(e,i));n=n<=r&&n>=-r?n:n>0?r:-r,s=s<=r&&s>=-r?s:s>0?r:-r;var h=(n>0?-1:1)*this.options.dragOptions.brakeSpeed,a=(s>0?-1:1)*this.options.dragOptions.brakeSpeed;e=(0-Math.pow(n,2))/(2*h)+this.getScrollLeft(),i=(0-Math.pow(s,2))/(2*a)+this.getScrollTop(),this.scrollTo(e,i)}else this.scrollTo(e,i,this.options.dragOptions.fade);var c,d},t.prototype.calcAverageVelocity=function(t){var e,i,o,n,s,r=this.getTimestamp()/1e3;e=i=o=n=s=0;for(var l in this.vy){parseFloat(l)>r-t&&"undefined"!=typeof h&&"undefined"!=typeof a&&"undefined"!=typeof c&&(e+=parseFloat(l)-h,n=this.vx[l]-a,s=this.vy[l]-c,i+=Math.abs(n),o+=Math.abs(s));var h=parseFloat(l),a=this.vx[l],c=this.vy[l]}var d=0===e?0:n>0?i/e:i/-e,p=0===e?0:s>0?o/e:o/-e;return[d,p]},t.prototype.getRealCoords=function(t,e){t=Math.round(t/(this.options.gridX*this.getScale()))*(this.options.gridX*this.getScale()),e=Math.round(e/(this.options.gridY*this.getScale()))*(this.options.gridY*this.getScale());var i=this.scrollElement.scrollWidth-this.scrollElement.clientWidth,o=this.scrollElement.scrollHeight-this.scrollElement.clientHeight;return[t>i?i:t,e>o?o:e]},t.prototype.timedScroll=function(t,e,i){var o=this;this.timeouts.push(setTimeout(function(t,e,i){return function(){i.setScrollTop(e),i.setScrollLeft(t),i.originScrollLeft=t,i.originScrollTop=e}}(t,e,o),i))},t.prototype.fadeOutByVelocity=function(t,e){var i=this,o=(e>0?-1:1)*this.options.dragOptions.brakeSpeed,n=(t>0?-1:1)*this.options.dragOptions.brakeSpeed,s=Math.max((0-e)/o,(0-t)/n);n=(0-t)/s,o=(0-e)/s;for(var r=this.options.dragOptions.fps,l=0;l<s*r+0/r;l++){var h=(l+1)/r,a=this.getScrollTop()+e*h+.5*o*h*h,c=this.getScrollLeft()+t*h+.5*n*h*h;this.timedScroll(c,a,(l+1)*(1e3/r))}l>0&&(c=t>0?Math.ceil(c):Math.floor(c),a=e>0?Math.ceil(a):Math.floor(a),this.timedScroll(c,a,(l+2)*(1e3/r))),this.clearListenerLeft=function(){return i.clearTimeouts()},this.clearListenerRight=function(){return i.clearTimeouts()},this.clearListenerTop=function(){return i.clearTimeouts()},this.clearListenerBottom=function(){return i.clearTimeouts()},this.addEventListener(this.inner,"collide.left",this.clearListenerLeft),this.addEventListener(this.inner,"collide.right",this.clearListenerRight),this.addEventListener(this.inner,"collide.top",this.clearListenerTop),this.addEventListener(this.inner,"collide.bottom",this.clearListenerBottom)},t.prototype.fadeOutByCoords=function(t,e){l=this.getRealCoords(t,e),t=l[0],e=l[1];var i=this.options.dragOptions.brakeSpeed*-1,o=0-2*i*(e-this.getScrollTop()),n=0-2*i*(t-this.getScrollLeft());o=(o>0?1:-1)*Math.sqrt(Math.abs(o)),n=(n>0?1:-1)*Math.sqrt(Math.abs(n));var s=t-this.getScrollLeft(),r=e-this.getScrollTop();Math.abs(r)>Math.abs(s)?n=(n>0?1:-1)*Math.abs(s/r*o):o=(o>0?1:-1)*Math.abs(r/s*n),this.clearTimeouts(),this.fadeOutByVelocity(n,o);var l},t.prototype.mouseMove=function(t){if(this.present=this.getTimestamp()/1e3,this.clearTextSelection(),"which"in t&&0===t.which||"undefined"==typeof t.which&&"button"in t&&0===t.button)return void this.mouseUp(t);var e=this.dragOriginLeft+this.dragOriginScrollLeft-t.clientX,i=this.dragOriginTop+this.dragOriginScrollTop-t.clientY;this.triggered.collideBottom&&this.options.elasticEdges.bottom===!0&&(this.inner.style.position="relative",this.inner.style.top=(this.getScrollTop()-i)/2+"px"),this.triggered.collideTop&&this.options.elasticEdges.top===!0&&(this.inner.style.position="relative",this.inner.style.top=i/-2+"px"),this.triggered.collideLeft&&this.options.elasticEdges.left===!0&&(this.inner.style.position="relative",this.inner.style.left=e/-2+"px"),this.triggered.collideRight&&this.options.elasticEdges.right===!0&&(this.inner.style.position="relative",this.inner.style.left=(this.getScrollLeft()-e)/2+"px"),this.vx[this.present]=e,this.vy[this.present]=i,this.scrollTo(e,i,!1),this.past=this.present},t.prototype.scrollBy=function(t,e,i){void 0===i&&(i=!0);var o=this.getScrollLeft()+t,n=this.getScrollTop()+e;this.scrollTo(o,n,i)},t.prototype.scrollTo=function(t,e,i){void 0===i&&(i=!0),this.clearTimeouts(),this.scrollMaxLeft=this.scrollElement.scrollWidth-this.scrollElement.clientWidth,this.scrollMaxTop=this.scrollElement.scrollHeight-this.scrollElement.clientHeight;var t=t>this.scrollMaxLeft?this.scrollMaxLeft:t<0?0:t,e=e>this.scrollMaxTop?this.scrollMaxTop:e<0?0:e;this.originScrollLeft=this.getScrollLeft(),this.originScrollTop=this.getScrollTop(),t===this.getScrollLeft()&&e===this.getScrollTop()||(this.options.wheelOptions.smooth!==!0||i===!1?(this.setScrollTop(e),this.setScrollLeft(t)):this.fadeOutByCoords(t,e))},t.prototype.on=function(t,e){this.addEventListener(this.inner,t,e);var i=t.replace(/\.([a-z])/,String.call.bind(t.toUpperCase)).replace(/\./,"");return this.triggered[i]=!1,this.onScroll(),this},t.prototype.off=function(t,e){return this.removeEventListener(this.inner,t,e),this},t.prototype.destroy=function(){var t=this.getScrollLeft(),e=this.getScrollTop();for(this.removeClass(this.container,this.classOuter),this.removeClass(this.inner,this.classGrab),this.removeClass(this.container,this.classNoGrab);this.inner.childNodes.length>0;)this.container.appendChild(this.inner.childNodes[0]);this.scaleElement.removeChild(this.inner),this.container.removeChild(this.scaleElement),this.scrollTo(t,e,!1),this.scrollElement.onmousewheel=null,this.scrollElement.onscroll=null,window.onresize=null;for(var i in this.customEvents)for(var o in this.customEvents[i])this.removeEventListener(this.inner,i,this.customEvents[i][o][0])},t}();return new n(t,e)}return i})},{}]},{},[1])(1)});